typeset -g -A key

# Press "Ctrl-o" in a menu to select an option and continue 
# in the menu
bindkey -M menuselect '\C-o' accept-and-menu-complete

# Press "q" in a list to quit
bindkey -M listscroll q send-break

# Kill the region for later yanking
bindkey '\C-w' kill-region

# .: rationalize dot -> ... = ../.. 
function rationalize-dot() 
{
    if [[ $LBUFFER = *.. ]]; then
        LBUFFER+=/..
    else
        LBUFFER+=.
    fi
}
zle -N rationalize-dot
bindkey . rationalize-dot

# Terminal.app sucks :'(
if [[ $OSTYPE[1,6] == "darwin" ]]; then
    bindkey '^[^[[D' backward-word
    bindkey '^[^[[C' forward-word
    bindkey '^[[H' beginning-of-line
    bindkey '^[[F' end-of-line
    bindkey '^[[3~' delete-char
    bindkey '^[^N' newtab
    bindkey '^?' backward-delete-char
fi
